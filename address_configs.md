# –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ç–∏

## –ß–∞—Å—Ç—å 1: –î–µ—Ç–∞–ª—å–Ω–æ–µ –∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ `network-setup.sh`

```bash
#!/bin/bash
# –≠—Ç–∞ —Å—Ç—Ä–æ–∫–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è "—à–µ–±–∞–Ω–≥" (shebang). –û–Ω–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∏—Å—Ç–µ–º–µ, –∫–∞–∫–æ–π –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞.
# /bin/bash - —ç—Ç–æ –ø—É—Ç—å –∫ Bash –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä—É. –ö–æ–≥–¥–∞ –≤—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ —Å–∫—Ä–∏–ø—Ç, —Å–∏—Å—Ç–µ–º–∞ —á–∏—Ç–∞–µ—Ç —ç—Ç—É —Å—Ç—Ä–æ–∫—É –∏ –ø–æ–Ω–∏–º–∞–µ—Ç:
# "–û–∫–µ–π, —ç—Ç–æ—Ç —Ñ–∞–π–ª –Ω—É–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å –ø–æ–º–æ—â—å—é Bash"

# –°–∫—Ä–∏–ø—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ç–µ–≤—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
# –≠—Ç–æ –æ–±—ã—á–Ω—ã–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è –ª—é–¥–µ–π, —á—Ç–æ–±—ã –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Core Switch
# –§—É–Ω–∫—Ü–∏—è –≤ bash - —ç—Ç–æ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–π –±–ª–æ–∫ –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ
# –ò–º—è —Ñ—É–Ω–∫—Ü–∏–∏: setup_core_switch
# –ö—Ä—É–≥–ª—ã–µ —Å–∫–æ–±–∫–∏ () –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, —á—Ç–æ —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è (–ø—É—Å—Ç—ã–µ, —Ç–∞–∫ –∫–∞–∫ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)
setup_core_switch() {
    # echo - –∫–æ–º–∞–Ω–¥–∞ –≤—ã–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ –≤ –∫–æ–Ω—Å–æ–ª—å
    # –í –∫–∞–≤—ã—á–∫–∞—Ö - —Å—Ç—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–∞
    echo "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Core Switch..."
    
    # 1. –°–û–ó–î–ê–ù–ò–ï VLAN –ò–ù–¢–ï–†–§–ï–ô–°–û–í
    # ip link - –∫–æ–º–∞–Ω–¥–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ç–µ–≤—ã–º–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏ –≤ Linux
    # add - –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
    # link eth0 - —Å–æ–∑–¥–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ù–ê –û–°–ù–û–í–ï (linked to) —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ eth0
    # name eth0.10 - –Ω–∞–∑–≤–∞—Ç—å –Ω–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å "eth0.10" (—Ç–æ—á–∫–∞ - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ VLAN –≤ Linux)
    # type vlan id 10 - —Ç–∏–ø –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞: VLAN —Å –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º 10
    
    # –°–æ–∑–¥–∞–µ–º "–≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Ç—É–Ω–Ω–µ–ª—å" –≤–Ω—É—Ç—Ä–∏ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ –∫–∞–±–µ–ª—è –¥–ª—è VLAN 10
    ip link add link eth0 name eth0.10 type vlan id 10
    
    # –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è VLAN 20 - –≤—Ç–æ—Ä–æ–π "–≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Ç—É–Ω–Ω–µ–ª—å" –≤ —Ç–æ–º –∂–µ –∫–∞–±–µ–ª–µ
    ip link add link eth0 name eth0.20 type vlan id 20
    
    # 2. –ê–ö–¢–ò–í–ê–¶–ò–Ø –ò–ù–¢–ï–†–§–ï–ô–°–û–í
    # ip link set - –∏–∑–º–µ–Ω–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
    # eth0.10 up - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å eth0.10 –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ "up" (–≤–∫–ª—é—á–µ–Ω/–∞–∫—Ç–∏–≤–µ–Ω)
    # –î–æ —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –Ω–æ –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω
    
    # –í–∫–ª—é—á–∞–µ–º VLAN –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è VLAN 10
    ip link set eth0.10 up
    
    # –í–∫–ª—é—á–∞–µ–º VLAN –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è VLAN 20
    ip link set eth0.20 up
    
    # 3. –ù–ê–ó–ù–ê–ß–ï–ù–ò–ï IP-–ê–î–†–ï–°–û–í
    # ip addr add - –¥–æ–±–∞–≤–∏—Ç—å IP-–∞–¥—Ä–µ—Å –∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
    # 10.0.0.1/24 - IP-–∞–¥—Ä–µ—Å —Å –º–∞—Å–∫–æ–π –ø–æ–¥—Å–µ—Ç–∏ /24 (255.255.255.0)
    # /24 –æ–∑–Ω–∞—á–∞–µ—Ç: –ø–µ—Ä–≤—ã–µ 24 –±–∏—Ç–∞ - —Å–µ—Ç—å, –ø–æ—Å–ª–µ–¥–Ω–∏–µ 8 –±–∏—Ç–æ–≤ - —Ö–æ—Å—Ç
    # dev eth0 - –Ω–∞–∑–Ω–∞—á–∏—Ç—å –∞–¥—Ä–µ—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É (device) eth0
    
    # –û—Å–Ω–æ–≤–Ω–æ–π IP-–∞–¥—Ä–µ—Å –¥–ª—è —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Å–≤–∏—Ç—á–∞–º–∏
    ip addr add 10.0.0.1/24 dev eth0
    
    # IP-–∞–¥—Ä–µ—Å –¥–ª—è VLAN 10 (–±—É–¥–µ—Ç —à–ª—é–∑–æ–º –¥–ª—è –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–≤ –≤ VLAN 10)
    # 192.168.10.254 - –æ–±—ã—á–Ω–æ —à–ª—é–∑—ã –¥–µ–ª–∞—é—Ç –Ω–∞ "–∫—Ä—É–≥–ª—ã—Ö" –∞–¥—Ä–µ—Å–∞—Ö (.1, .254, .255)
    # dev eth0.10 - –Ω–∞–∑–Ω–∞—á–∏—Ç—å –∞–¥—Ä–µ—Å VLAN –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
    ip addr add 192.168.10.254/24 dev eth0.10
    
    # IP-–∞–¥—Ä–µ—Å –¥–ª—è VLAN 20 (—à–ª—é–∑ –¥–ª—è VLAN 20)
    ip addr add 192.168.20.254/24 dev eth0.20
    
    # 4. –í–ö–õ–Æ–ß–ï–ù–ò–ï –ú–ê–†–®–†–£–¢–ò–ó–ê–¶–ò–ò
    # > - –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã–≤–æ–¥–∞ (redirect)
    # /proc/sys/net/ipv4/ip_forward - —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª –≤ Linux
    # –ó–Ω–∞—á–µ–Ω–∏–µ 0: –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –í–´–ö–õ–Æ–ß–ï–ù–ê (—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Ç–æ–ª—å–∫–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç/–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–≤–æ–∏ –ø–∞–∫–µ—Ç—ã)
    # –ó–Ω–∞—á–µ–Ω–∏–µ 1: –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –í–ö–õ–Æ–ß–ï–ù–ê (—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –º–æ–∂–µ—Ç –ø–µ—Ä–µ—Å—ã–ª–∞—Ç—å —á—É–∂–∏–µ –ø–∞–∫–µ—Ç—ã)
    
    # –í–∫–ª—é—á–∞–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ—Å—ã–ª–∞—Ç—å –ø–∞–∫–µ—Ç—ã –º–µ–∂–¥—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏
    echo 1 > /proc/sys/net/ipv4/ip_forward
    
    # 5. –î–û–ë–ê–í–õ–ï–ù–ò–ï –°–¢–ê–¢–ò–ß–ï–°–ö–ò–• –ú–ê–†–®–†–£–¢–û–í
    # ip route add - –¥–æ–±–∞–≤–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç –≤ —Ç–∞–±–ª–∏—Ü—É –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
    # 192.168.10.0/24 - —Å–µ—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è (–∫—É–¥–∞ —Ö–æ—Ç–∏–º –ø–æ–ø–∞—Å—Ç—å)
    # via 10.0.0.2 - —á–µ—Ä–µ–∑ –∫–∞–∫–æ–π –∞–¥—Ä–µ—Å –∏–¥—Ç–∏ (next hop)
    
    # "–ß—Ç–æ–±—ã –ø–æ–ø–∞—Å—Ç—å –≤ —Å–µ—Ç—å 192.168.10.0/24, –∏–¥–∏ —á–µ—Ä–µ–∑ 10.0.0.2"
    # –≠—Ç–æ –Ω—É–∂–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ Core Switch –Ω–∞–ø—Ä—è–º—É—é –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω –∫ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞–º VLAN 10
    # –û–Ω–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã —á–µ—Ä–µ–∑ Access Switch 1 (10.0.0.2)
    ip route add 192.168.10.0/24 via 10.0.0.2
    
    # –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è VLAN 20 —á–µ—Ä–µ–∑ Access Switch 2
    ip route add 192.168.20.0/24 via 10.0.0.3
    
    # –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
    echo "Core Switch –Ω–∞—Å—Ç—Ä–æ–µ–Ω"
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Access Switch 1
# –≠—Ç–æ—Ç switch –±—É–¥–µ—Ç –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å VLAN 10
setup_access_switch1() {
    echo "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Access Switch 1..."
    
    # 1. –°–û–ó–î–ê–ù–ò–ï VLAN –ò–ù–¢–ï–†–§–ï–ô–°–ê
    # –¢–æ–ª—å–∫–æ –æ–¥–∏–Ω VLAN (10), —Ç–∞–∫ –∫–∞–∫ —ç—Ç–æ—Ç switch –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –æ—Ç–¥–µ–ª
    ip link add link eth0 name eth0.10 type vlan id 10
    
    # 2. –ê–ö–¢–ò–í–ê–¶–ò–Ø –ò–ù–¢–ï–†–§–ï–ô–°–û–í
    # eth0.10 - VLAN –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Å–≤—è–∑–∏ —Å Core Switch
    ip link set eth0.10 up
    
    # eth1 - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–≤ (–≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ PC1)
    # –í Docker eth1 –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–Ω –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ vlan10-network
    ip link set eth1 up
    
    # 3. –ù–ê–ó–ù–ê–ß–ï–ù–ò–ï IP-–ê–î–†–ï–°–û–í
    # 10.0.0.2 - –∞–¥—Ä–µ—Å –¥–ª—è —Å–≤—è–∑–∏ —Å Core Switch (uplink)
    ip addr add 10.0.0.2/24 dev eth0
    
    # 192.168.10.1 - –∞–¥—Ä–µ—Å –¥–ª—è –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–≤ –≤ VLAN 10
    # .1 - –æ–±—ã—á–Ω–æ —à–ª—é–∑ –≤ –ø–æ–¥—Å–µ—Ç–∏
    ip addr add 192.168.10.1/24 dev eth0.10
    
    # 4. –í–ö–õ–Æ–ß–ï–ù–ò–ï –ú–ê–†–®–†–£–¢–ò–ó–ê–¶–ò–ò
    echo 1 > /proc/sys/net/ipv4/ip_forward
    
    # 5. –ú–ê–†–®–†–£–¢ –ü–û –£–ú–û–õ–ß–ê–ù–ò–Æ
    # default –∏–ª–∏ 0.0.0.0/0 - "–≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏"
    # via 10.0.0.1 - —á–µ—Ä–µ–∑ Core Switch
    
    # "–ï—Å–ª–∏ –Ω–µ –∑–Ω–∞–µ—à—å –∫—É–¥–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∞–∫–µ—Ç - –æ—Ç–ø—Ä–∞–≤–ª—è–π –Ω–∞ 10.0.0.1"
    ip route add default via 10.0.0.1
    
    echo "Access Switch 1 –Ω–∞—Å—Ç—Ä–æ–µ–Ω"
}

# –§—É–Ω–∫—Ü–∏—è –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Access Switch 2
# –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –ø–µ—Ä–≤–æ–º—É, –Ω–æ –¥–ª—è VLAN 20
setup_access_switch2() {
    echo "–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Access Switch 2..."
    
    # VLAN 20 –¥–ª—è –æ—Ç–¥–µ–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
    ip link add link eth0 name eth0.20 type vlan id 20
    
    ip link set eth0.20 up
    ip link set eth1 up
    
    ip addr add 10.0.0.3/24 dev eth0
    ip addr add 192.168.20.1/24 dev eth0.20
    
    echo 1 > /proc/sys/net/ipv4/ip_forward
    
    ip route add default via 10.0.0.1
    
    echo "Access Switch 2 –Ω–∞—Å—Ç—Ä–æ–µ–Ω"
}

# –û–°–ù–û–í–ù–û–ô –ö–û–î –°–ö–†–ò–ü–¢–ê
# case ... esac - –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –≤—ã–±–æ—Ä–∞ (–∞–Ω–∞–ª–æ–≥ switch –≤ –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–∞—Ö)
# $(hostname) - –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É hostname –∏ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
# hostname –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–º—è —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞)

case $(hostname) in
    # –ï—Å–ª–∏ hostname —Ä–∞–≤–µ–Ω "Core-Switch"
    "Core-Switch")
        # –í—ã–∑—ã–≤–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏—é
        setup_core_switch
        ;;  # ;; –æ–∑–Ω–∞—á–∞–µ—Ç –∫–æ–Ω–µ—Ü —ç—Ç–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞ (break)
    
    "Access-Switch1")
        setup_access_switch1
        ;;
    
    "Access-Switch2")
        setup_access_switch2
        ;;
    
    # *) - –≤–∞—Ä–∏–∞–Ω—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–µ—Å–ª–∏ –Ω–∏ –æ–¥–Ω–æ –∏–∑ —É—Å–ª–æ–≤–∏–π –Ω–µ —Å–æ–≤–ø–∞–ª–æ)
    *)
        echo "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ"
        ;;  # –ü–æ—Å–ª–µ–¥–Ω–∏–π ;; –º–æ–∂–Ω–æ –Ω–µ —Å—Ç–∞–≤–∏—Ç—å, –Ω–æ –ª—É—á—à–µ –¥–ª—è consistency
esac  # –ö–æ–Ω–µ—Ü case (—á–∏—Ç–∞–µ—Ç—Å—è –∫–∞–∫ "case" –Ω–∞–æ–±–æ—Ä–æ—Ç)
```

## –ß–∞—Å—Ç—å 2: –õ–æ–≥–∏–∫–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è IP-–∞–¥—Ä–µ—Å–æ–≤ –≤ docker-compose.yml

–î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä–µ–º **–ª–æ–≥–∏–∫—É –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—é** –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∞–¥—Ä–µ—Å–æ–≤:

### üìä **–°—Ö–µ–º–∞ –∞–¥—Ä–µ—Å–∞—Ü–∏–∏:**

```yaml
# –°–ï–¢–¨ 1: –ú–∞–≥–∏—Å—Ç—Ä–∞–ª—å–Ω–∞—è —Å–µ—Ç—å (—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∞—è)
core-network: 10.0.0.0/24
‚îú‚îÄ‚îÄ Core-Switch:     10.0.0.1    # –ü–µ—Ä–≤—ã–π —Å–≤–æ–±–æ–¥–Ω—ã–π –∞–¥—Ä–µ—Å –≤ —Å–µ—Ç–∏
‚îú‚îÄ‚îÄ Access-Switch1:  10.0.0.2    # –í—Ç–æ—Ä–æ–π –∞–¥—Ä–µ—Å
‚îî‚îÄ‚îÄ Access-Switch2:  10.0.0.3    # –¢—Ä–µ—Ç–∏–π –∞–¥—Ä–µ—Å

# –°–ï–¢–¨ 2: VLAN 10 (–û—Ç–¥–µ–ª –ø—Ä–æ–¥–∞–∂)
vlan10-network: 192.168.10.0/24
‚îú‚îÄ‚îÄ Access-Switch1: 192.168.10.1    # –®–ª—é–∑ –¥–ª—è –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–≤
‚îî‚îÄ‚îÄ PC1:           192.168.10.10   # –ö–ª–∏–µ–Ω—Ç—Å–∫–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ

# –°–ï–¢–¨ 3: VLAN 20 (–û—Ç–¥–µ–ª —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
vlan20-network: 192.168.20.0/24
‚îú‚îÄ‚îÄ Access-Switch2: 192.168.20.1    # –®–ª—é–∑ –¥–ª—è –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–≤
‚îî‚îÄ‚îÄ PC2:           192.168.20.10   # –ö–ª–∏–µ–Ω—Ç—Å–∫–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
```

### üîç **–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –∫–∞–∂–¥–æ–π —Å–µ–∫—Ü–∏–∏:**

```yaml
version: '3.8'
# –í–µ—Ä—Å–∏—è —Ñ–æ—Ä–º–∞—Ç–∞ docker-compose —Ñ–∞–π–ª–∞
# 3.x - —Å–∞–º–∞—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –≤–µ—Ä—Å–∏—è

services:
  # –£–°–õ–£–ì–ê 1: Core-Switch (—è–¥—Ä–æ —Å–µ—Ç–∏)
  core-switch:
    build:
      context: .  # –°–æ–±–∏—Ä–∞—Ç—å –æ–±—Ä–∞–∑ –∏–∑ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏
      dockerfile: Dockerfile.cisco-base  # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç Dockerfile
    
    container_name: core-switch  # –ò–º—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –æ–±—Ä–∞—â–µ–Ω–∏—è)
    hostname: Core-Switch  # –í–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –∏–º—è —Ö–æ—Å—Ç–∞ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π hostname)
    
    cap_add:
      - NET_ADMIN  # –î–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –ø—Ä–∞–≤–∞ –Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ç—å—é
    
    networks:
      core-network:
        ipv4_address: 10.0.0.1  # –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π IP –≤ —ç—Ç–æ–π —Å–µ—Ç–∏
    
    volumes:
      # –ú–æ–Ω—Ç–∏—Ä—É–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å —Ö–æ—Å—Ç–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
      - ./configs/core-switch:/config  # –ö–æ–Ω—Ñ–∏–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –Ω–∞ —Ö–æ—Å—Ç-–º–∞—à–∏–Ω–µ
      - ./scripts:/scripts  # –°–∫—Ä–∏–ø—Ç—ã –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
    
    tty: true  # –í—ã–¥–µ–ª—è–µ–º –ø—Å–µ–≤–¥–æ-TTY (–Ω—É–∂–Ω–æ –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã)
    stdin_open: true  # –û—Ç–∫—Ä—ã–≤–∞–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤–≤–æ–¥ (–¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏)
    command: /bin/bash  # –ó–∞–ø—É—Å–∫–∞–µ–º bash –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
```

### üåê **–õ–æ–≥–∏–∫–∞ —Å–µ—Ç–µ–π Docker:**

```yaml
networks:
  # –°–ï–¢–¨ 1: –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–∞—è —Å–µ—Ç—å –º–µ–∂–¥—É —Å–≤–∏—Ç—á–∞–º–∏
  core-network:
    driver: bridge  # –¢–∏–ø —Å–µ—Ç–∏ - –º–æ—Å—Ç (—Å–∞–º—ã–π —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–π)
    ipam:  # IP Address Management - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ IP-–∞–¥—Ä–µ—Å–∞–º–∏
      config:
        - subnet: 10.0.0.0/24  # –î–∏–∞–ø–∞–∑–æ–Ω –∞–¥—Ä–µ—Å–æ–≤ –¥–ª—è —ç—Ç–æ–π —Å–µ—Ç–∏
          # –ê–¥—Ä–µ—Å–∞: 10.0.0.1 - 10.0.0.254
          # 10.0.0.0 - –∞–¥—Ä–µ—Å —Å–µ—Ç–∏, 10.0.0.255 - —à–∏—Ä–æ–∫–æ–≤–µ—â–∞—Ç–µ–ª—å–Ω—ã–π
  
  # –°–ï–¢–¨ 2: VLAN –¥–ª—è –æ—Ç–¥–µ–ª–∞ –ø—Ä–æ–¥–∞–∂
  vlan10-network:
    driver: bridge
    ipam:
      config:
        - subnet: 192.168.10.0/24
          # 192.168.x.x - —á–∞—Å—Ç–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ (RFC 1918)
          # –ù–µ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É—é—Ç—Å—è –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ, —Ç–æ–ª—å–∫–æ –≤–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å–µ—Ç–∏
  
  # –°–ï–¢–¨ 3: VLAN –¥–ª—è –æ—Ç–¥–µ–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
  vlan20-network:
    driver: bridge
    ipam:
      config:
        - subnet: 192.168.20.0/24
```

### üéØ **–ü–æ—á–µ–º—É —Ç–∞–∫–∏–µ –∞–¥—Ä–µ—Å–∞? –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞:**

1. **10.0.0.0/24 –¥–ª—è transport —Å–µ—Ç–∏**:
   - 10.0.0.1 –æ–±—ã—á–Ω–æ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –≥–ª–∞–≤–Ω–æ–º—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É (–∫–∞–∫ –≤ –¥–æ–º–∞—à–Ω–∏—Ö —Ä–æ—É—Ç–µ—Ä–∞—Ö)
   - –ü–æ—Å–ª–µ–¥—É—é—â–∏–µ –∞–¥—Ä–µ—Å–∞ –ø–æ –ø–æ—Ä—è–¥–∫—É: .2, .3, .4...

2. **192.168.X.0/24 –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö VLAN**:
   - X = –Ω–æ–º–µ—Ä VLAN (10, 20, 30...)
   - .1 - —à–ª—é–∑ (gateway)
   - .10, .11, .12... - –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
   - .254 - –æ–±—ã—á–Ω–æ —Ä–µ–∑–µ—Ä–≤–Ω—ã–π —à–ª—é–∑ –∏–ª–∏ special use

3. **–ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —Ç–∞–∫–∏–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã**:
   ```
   10.0.0.0/8       - –ë–æ–ª—å—à–∏–µ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Å–µ—Ç–∏
   172.16.0.0/12    - –°—Ä–µ–¥–Ω–∏–µ —Å–µ—Ç–∏
   192.168.0.0/16   - –ú–∞–ª–µ–Ω—å–∫–∏–µ —Å–µ—Ç–∏ / –¥–æ–º–∞—à–Ω–∏–µ / –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ
   ```

### üîÑ **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–º–µ—Å—Ç–µ:**

**–ü—Ä–∏–º–µ—Ä: PC1 —Ö–æ—á–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∞–∫–µ—Ç PC2**

1. **PC1 (192.168.10.10)** ‚Üí —Å–º–æ—Ç—Ä–∏—Ç —Ç–∞–±–ª–∏—Ü—É –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
   - –°–µ—Ç—å 192.168.10.0/24 –Ω–∞–ø—Ä—è–º—É—é –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ (eth0)
   - –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ (0.0.0.0/0) —á–µ—Ä–µ–∑ —à–ª—é–∑ 192.168.10.1

2. **–ü–∞–∫–µ—Ç –∏–¥–µ—Ç –Ω–∞ Access-Switch1 (192.168.10.1)**
   - –í —Å–∫—Ä–∏–ø—Ç–µ: `ip route add default via 10.0.0.1`
   - Switch –≤–∏–¥–∏—Ç: —ç—Ç–æ –Ω–µ –¥–ª—è –º–æ–µ–π —Å–µ—Ç–∏ 192.168.10.0/24
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ default gateway: Core-Switch (10.0.0.1)

3. **–ü–∞–∫–µ—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç –Ω–∞ Core-Switch**
   - –í —Å–∫—Ä–∏–ø—Ç–µ: `ip route add 192.168.20.0/24 via 10.0.0.3`
   - Core-Switch —Å–º–æ—Ç—Ä–∏—Ç: —Ü–µ–ª—å - 192.168.20.10
   - –ù–∞—Ö–æ–¥–∏—Ç –º–∞—Ä—à—Ä—É—Ç: —á–µ—Ä–µ–∑ 10.0.0.3 (Access-Switch2)

4. **–ü–∞–∫–µ—Ç –∏–¥–µ—Ç –Ω–∞ Access-Switch2**
   - Switch2 –ø–æ–ª—É—á–∞–µ—Ç –ø–∞–∫–µ—Ç –Ω–∞ eth0 (10.0.0.3)
   - –í–∏–¥–∏—Ç, —á—Ç–æ —Ü–µ–ª—å - 192.168.20.10 (–µ–≥–æ —Å–µ—Ç—å)
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —á–µ—Ä–µ–∑ VLAN –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å eth0.20 –Ω–∞ PC2

5. **PC2 –ø–æ–ª—É—á–∞–µ—Ç –ø–∞–∫–µ—Ç**

### üìù **–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è:**

1. **–î–≤–∞ —É—Ä–æ–≤–Ω—è –∞–¥—Ä–µ—Å–∞—Ü–∏–∏**:
   - **Transport —Å–µ—Ç—å (10.0.0.0/24)**: –¥–ª—è —Å–≤—è–∑–∏ –º–µ–∂–¥—É —Å–≤–∏—Ç—á–∞–º–∏
   - **User —Å–µ—Ç–∏ (192.168.X.0/24)**: –¥–ª—è –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

2. **VLAN –∫–∞–∫ –ª–æ–≥–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ**:
   - –§–∏–∑–∏—á–µ—Å–∫–∏ –≤—Å–µ –∏–¥–µ—Ç —á–µ—Ä–µ–∑ eth0
   - –õ–æ–≥–∏—á–µ—Å–∫–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–æ –Ω–∞ eth0.10 –∏ eth0.20

3. **–†–æ–ª—å –∫–∞–∂–¥–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞**:
   - **Core-Switch**: –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –ú–ï–ñ–î–£ VLAN
   - **Access-Switch**: –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –ø–µ—Ä–µ–¥–∞—á–∞ –≤–≤–µ—Ä—Ö
   - **PC**: —Ç–æ–ª—å–∫–æ –æ—Ç–ø—Ä–∞–≤–∫–∞/–ø–æ–ª—É—á–µ–Ω–∏–µ —Å–≤–æ–∏—Ö –ø–∞–∫–µ—Ç–æ–≤

4. **–í–∞–∂–Ω–æ—Å—Ç—å –º–∞—Ä—à—Ä—É—Ç–æ–≤**:
   - –ë–µ–∑ `ip route add` –ø–∞–∫–µ—Ç—ã –Ω–µ –∑–Ω–∞–ª–∏ –±—ã –∫—É–¥–∞ –∏–¥—Ç–∏
   - `default via` = "–µ—Å–ª–∏ –Ω–µ –∑–Ω–∞–µ—à—å –∫—É–¥–∞ - –∏–¥–∏ —Å—é–¥–∞"

### üêõ **–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫–∞–∫–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Å–æ–∑–¥–∞–ª–∏—Å—å
docker exec core-switch ip link show

# –û–∂–∏–¥–∞–µ–º —É–≤–∏–¥–µ—Ç—å:
# eth0: state UP
# eth0.10@eth0: state UP (VLAN 10)
# eth0.20@eth0: state UP (VLAN 20)

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å IP-–∞–¥—Ä–µ—Å–∞
docker exec core-switch ip addr show

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏
docker exec core-switch ip route show

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤—è–∑–Ω–æ—Å—Ç—å
docker exec core-switch ping -c 2 10.0.0.2
```

### üí° **–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Å–æ–≤–µ—Ç –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤:**

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ —Å–µ—Ç—å –∫–∞–∫ **–ø–æ—á—Ç–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É**:

- **IP-–∞–¥—Ä–µ—Å** = –¥–æ–º–∞—à–Ω–∏–π –∞–¥—Ä–µ—Å
- **–®–ª—é–∑ (gateway)** = –ø–æ—á—Ç–æ–≤–æ–µ –æ—Ç–¥–µ–ª–µ–Ω–∏–µ
- **–ú–∞—Ä—à—Ä—É—Ç (route)** = –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –ø–æ—á—Ç–∞–ª—å–æ–Ω–∞
- **VLAN** = —Ä–∞–∑–Ω—ã–µ —Ü–≤–µ—Ç–∞ –∫–æ–Ω–≤–µ—Ä—Ç–æ–≤ (–∫—Ä–∞—Å–Ω—ã–µ - –æ—Ç–¥–µ–ª A, —Å–∏–Ω–∏–µ - –æ—Ç–¥–µ–ª B)
- **–°–≤–∏—Ç—á** = —Å–æ—Ä—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–π —Ü–µ–Ω—Ç—Ä

–í–∞—à —Å–∫—Ä–∏–ø—Ç - —ç—Ç–æ **–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ—á—Ç–æ–≤–æ–≥–æ –æ—Ç–¥–µ–ª–µ–Ω–∏—è**, –∫–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø–∏—Å—å–º–∞ —Ä–∞–∑–Ω—ã—Ö —Ü–≤–µ—Ç–æ–≤!